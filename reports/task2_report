SELECT
    -- Total revenue
    SUM(total_price) AS total_sales,
    
    -- Total number of transactions
    COUNT(sale_id) AS total_transactions,
    
    -- Average transaction value
    AVG(total_price) AS avg_transaction_value,
    
    -- Highest single transaction
    MAX(total_price) AS highest_transaction,
    
    -- Day with highest sales (subquery)
    (SELECT sale_date
     FROM sales
     GROUP BY sale_date
     ORDER BY SUM(total_price) DESC
     LIMIT 1) AS highest_sales_day,
    
    -- Top product by revenue (subquery)
    (SELECT product_id
     FROM sales
     GROUP BY product_id
     ORDER BY SUM(total_price) DESC
     LIMIT 1) AS top_product,
     
    -- Top customer by spending (subquery)
    (SELECT customer_id
     FROM sales
     GROUP BY customer_id
     ORDER BY SUM(total_price) DESC
     LIMIT 1) AS top_customer

FROM sales;
